<script>
        let instanceCount = 0;
        // ðŸš¨ MUDANÃ‡A 1: A nova URL de proxy que aponta para o Ticker V3 da MEXC
        const PROXY_BASE_URL = "/api-mexc-proxy/v3/ticker/price"; 
        
        // ... (funÃ§Ã£o addInstance() permanece a mesma) ...

        function startTracking(id) {
            const pairSymbolInput = document.getElementById(`pair-symbol-${id}`);
            const initialPriceInput = document.getElementById(`initial-price-${id}`);
            const operationType = document.getElementById(`operation-type-${id}`).value;
            const currentPriceSpan = document.getElementById(`current-price-${id}`);
            const profitValueSpan = document.getElementById(`profit-value-${id}`);
            
            // Tratamento do SÃ­mbolo: Garante MAIÃšSCULAS e remove caracteres invÃ¡lidos
            let symbol = pairSymbolInput.value.toUpperCase().trim();
            // ðŸš¨ MUDANÃ‡A 2: NÃ£o precisa mais do underscore! O V3 usa o formato simples (CAKEUSDT).
            symbol = symbol.replace(/[^A-Z0-9]/g, ''); 
            
            const initialPrice = parseFloat(initialPriceInput.value);

            if (!symbol || isNaN(initialPrice) || initialPrice <= 0) {
                alert('Por favor, insira um par vÃ¡lido e um preÃ§o inicial positivo.');
                return;
            }

            if (window[`interval-${id}`]) {
                clearInterval(window[`interval-${id}`]);
            }

            const updatePrice = async () => {
                try {
                    // Chamada para a nova URL do Proxy (V3)
                    const response = await axios.get(PROXY_BASE_URL, {
                        params: {
                            symbol: symbol // O par de moedas no formato simples (ex: CAKEUSDT)
                        }
                    });

                    // ðŸš¨ MUDANÃ‡A 3: A estrutura de dados do V3 Ã© diferente. O preÃ§o estÃ¡ no campo 'price'.
                    const currentPrice = parseFloat(response.data.price);
                    
                    if (isNaN(currentPrice)) {
                        throw new Error("Resposta da API invÃ¡lida ou par nÃ£o encontrado.");
                    }
                    
                    // --- O restante da lÃ³gica de cÃ¡lculo e UI permanece a mesma ---
                    
                    let percentageProfit;
                    
                    if (operationType === 'buy') {
                        percentageProfit = ((currentPrice - initialPrice) / initialPrice) * 100;
                    } else if (operationType === 'sell') {
                        percentageProfit = ((initialPrice - currentPrice) / initialPrice) * 100;
                    } else {
                        percentageProfit = 0;
                    }

                    const currencySymbol = symbol.includes('USDT') ? '$' : '';
                    
                    currentPriceSpan.textContent = `${currencySymbol}${currentPrice.toFixed(8)}`; 
                    profitValueSpan.textContent = `${percentageProfit.toFixed(2)}%`;
                    
                    profitValueSpan.className = percentageProfit >= 0 ? 'positive' : 'negative';

                } catch (error) {
                    console.error(`Erro ao buscar preÃ§o para ${symbol}:`, error);
                    currentPriceSpan.textContent = 'Erro de Rede/API'; 
                    profitValueSpan.textContent = '0.00%';
                    profitValueSpan.className = '';
                }
            };
            
            updatePrice(); 
            window[`interval-${id}`] = setInterval(updatePrice, 10000); 
            
            alert(`Rastreamento para ${symbol} iniciado!`);
        }

        // ... (funÃ§Ãµes removeInstance() e o listener DOMContentLoaded permanecem as mesmas) ...
    </script>
